// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Testing {
  id                 Int       @id @default(autoincrement())
  userId             String
  name               String
  sizeInMB           Float
  startTime          DateTime
  endTime            DateTime?
  taskCount          Int
  completedTaskCount Int
  type               String
}

model Label {
  labelid   Int       @id @default(autoincrement())
  labelName String    @unique
  Models    Models[]
  Dataset   Dataset[]
}

model Models {
  modelid     Int     @id @default(autoincrement())
  modelName   String  @unique
  label_list  Label[]
  description String  @default("this is a model for testing")
  downloadN   Int     @default(0)
  likeN       Int     @default(0)
}

model Dataset {
  id                   Int                   @id @default(autoincrement())
  datasetName          String
  description          String                @default("this is a dataset for testing")
  sizeInMB             Float
  lastUpdate           DateTime
  starCount            Int                   @default(0)
  downloadCount        Int                   @default(0)
  label_list           Label[]
  questionType         Boolean               @default(false) // 0: choice, 1: short answer
  ChoiceQuestions      ChoiceQuestion[]
  ShortAnswerQuestions ShortAnswerQuestion[]
}

model ChoiceQuestion {
  id            Int       @id @default(autoincrement())
  question      String
  choices       Choice[]
  correctAnswer String
  Dataset       Dataset[]
}

model ShortAnswerQuestion {
  id           Int       @id @default(autoincrement())
  question     String
  sampleAnswer String
  Dataset      Dataset[]
}

model Choice {
  id               Int             @id @default(autoincrement())
  content          String
  ChoiceQuestion   ChoiceQuestion? @relation(fields: [choiceQuestionId], references: [id])
  choiceQuestionId Int?
}
